replicaCount: 1

image:
  repository: veladora
  pullPolicy: IfNotPresent
  tag: "latest"

frontend:
  image:
    repository: veladora-frontend
    pullPolicy: IfNotPresent
    tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

networkPolicy:
  enabled: false
  # Разрешаем входящий трафик только на NodePort (порт 8080 в контейнере)
  allowNodePort: true
  # Разрешаем внутренний трафик между подами в namespace
  allowIntraNamespace: true

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext:
  fsGroup: 1000

securityContext:
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  runAsUser: 1000

service:
  type: NodePort
  port: 8080
  nodePort: 30303
  # Access via: https://<node-ip>:30303 (TLS 1.3 only, no SNI required)

frontendService:
  type: NodePort
  port: 80
  nodePort: 30404
  # Access via: http://<node-ip>:30404

tls:
  enabled: true
  # Auto-generated certificate supports IP-based access (no SNI required)
  # Certificate is generated with SAN entries for IP addresses
  commonName: "veladora.local"
  # Optional: Provide your own certificate/key (plain text) or certificateBase64/keyBase64 (base64 encoded)
  certificate: ""
  key: ""
  certificateBase64: ""
  keyBase64: ""

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

frontendResources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 50m
    memory: 64Mi

postgres:
  enabled: true
  
  image:
    repository: postgres
    tag: "15-alpine"
    pullPolicy: IfNotPresent
  
  user: ""
  password: ""
  database: veladora
  
  service:
    type: ClusterIP
    port: 5432
  
  persistence:
    enabled: true
    accessMode: ReadWriteOnce
    size: 10Gi
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

redis:
  enabled: true
  
  image:
    repository: redis
    tag: "7-alpine"
    pullPolicy: IfNotPresent
  
  password: ""
  
  service:
    type: ClusterIP
    port: 6379
  
  persistence:
    enabled: true
    accessMode: ReadWriteOnce
    size: 5Gi
  
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

